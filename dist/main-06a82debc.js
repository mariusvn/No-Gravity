!function(e){function t(t){for(var i,o,s=t[0],c=t[1],l=t[2],h=0,f=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(u&&u(t);f.length;)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={0:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;a.push([28,1]),n()}([function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var i=n(4),r=n(22),a=n(23),o=n(24),s=n(25),c=n(2),l=n(7),u=n(6),h=n(16),f=n(27);function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.PIXI=i;var d=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.app=new i.Application({antialias:!0,autoDensity:!0,height:window.innerHeight,width:window.innerWidth,backgroundColor:4540222}),document.body.appendChild(e.app.view),e.app.renderer.height>500&&(i.settings.SCALE_MODE=i.SCALE_MODES.NEAREST);var n=new i.Container;e.sceneManager=new r.a(n),e.app.stage.addChild(n),Object(a.a)(e.app.loader,(function(){h.a.tilesets={earth:new c.a(l.a,{x:32,y:32}),moon:new c.a(u.a,{x:32,y:32})},e.app.ticker.add((function(e){return t.update(e)})),e.sceneManager.addScene(o.a,"MainMenu"),e.sceneManager.addScene(f.a,"level1"),e.sceneManager.activeScene="level1"})),window.game=e}var t,n,s;return t=e,(n=[{key:"update",value:function(t){e.sceneManager.activeScene&&e.sceneManager.getScene(e.sceneManager.activeScene).update(t)}}])&&p(t.prototype,n),s&&p(t,s),e}();y(d,"app",void 0),y(d,"sceneManager",void 0),y(d,"events",new s.a),y(d,"gameplayState",{isGravityEnabled:!0,gravityForce:2,paused:!1})}).call(this,n(5))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(0);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"texture",void 0),a(this,"tileSize",void 0),a(this,"tileTextures",[]),this.texture=i.a.app.loader.resources[t].texture,this.tileSize=n,this.generateTileSpriteArray()}var t,n,o;return t=e,(n=[{key:"generateTileSpriteArray",value:function(){for(var e=Math.floor(this.texture.width/this.tileSize.x),t=Math.floor(this.texture.height/this.tileSize.y),n=0;n<t;n++)for(var i=0;i<e;i++){var r=new PIXI.Rectangle(this.tileSize.x*i,this.tileSize.y*n,this.tileSize.x,this.tileSize.y);this.texture.frame=r,this.tileTextures.push(this.texture.clone())}}},{key:"getSprite",value:function(e){if(e>this.tileTextures.length)throw new TypeError("Cannot find ".concat(e,"th element in the tileset, maximum: ").concat(this.tileTextures.length));return new PIXI.Sprite(this.tileTextures[e])}}])&&r(t.prototype,n),o&&r(t,o),e}()},function(e,t,n){"use strict";function i(e,t){var n,i,r,a;return!1,e.centerX=e.x+e.width/2,e.centerY=e.y+e.height/2,t.centerX=t.x+t.width/2,t.centerY=t.y+t.height/2,e.halfWidth=e.width/2,e.halfHeight=e.height/2,t.halfWidth=t.width/2,t.halfHeight=t.height/2,r=e.centerX-t.centerX,a=e.centerY-t.centerY,n=e.halfWidth+t.halfWidth,i=e.halfHeight+t.halfHeight,Math.abs(r)<n&&Math.abs(a)<i}n.d(t,"a",(function(){return i}))},,,function(e,t,n){"use strict";t.a=n.p+"images/c5873e0e23386f347da578a498540ce6.png"},function(e,t,n){"use strict";t.a=n.p+"images/ee0762d9f99e6ad23ac956ae5699c0c9.png"},,function(e,t,n){"use strict";t.a=n.p+"images/9703cb95d0ea129f569e26e4a3fc1dd7.png"},function(e,t,n){"use strict";t.a=n.p+"images/ce9ad9322be2e6a2d659d391ad63dcce.png"},function(e,t,n){"use strict";t.a=n.p+"images/1c881fca628b4795734effdba87c9d87.png"},function(e,t,n){"use strict";t.a=n.p+"images/ede9caaf7e31907c893eb304262121b7.png"},function(e,t,n){"use strict";t.a=n.p+"images/292ea24d6b3465aa22255944c425e911.png"},function(e,t,n){"use strict";t.a=n.p+"images/8735110ff70fad2f5892a9277e5a428c.png"},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",(function(){return r}));var r=function(){function e(){var t,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=void 0,(n="sceneContainer")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,this.sceneContainer=new PIXI.Container}var t,n,r;return t=e,(n=[{key:"update",value:function(e){}},{key:"getContainer",value:function(){return this.sceneContainer}},{key:"onSceneStart",value:function(){}},{key:"onSceneEnd",value:function(){}}])&&i(t.prototype,n),r&&i(t,r),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(2),n(6),n(7);var i=n(3),r=n(0);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"container",new PIXI.Container),o(this,"containers",{earth:new PIXI.Container,moon:new PIXI.Container}),o(this,"currentTileset",e.TilesetType.EARTH),o(this,"tilemap",[]),o(this,"spriteList",{earth:[],moon:[]}),o(this,"width",0),o(this,"height",0),o(this,"tileRenderSize",0);for(var i=t.tileMap.split("\n"),a=0;a<i.length;a++){var s=i[a].split(",").map((function(e){return Number(e)}));0===s.length||1===s.length&&0===s[0]||this.tilemap.push(s)}this.width=this.tilemap[0].length,this.height=this.tilemap.length,this.tileRenderSize=Math.round(n/this.height),this.generateTilemapContent(),r.a.events.addEventHandler("gameplay:gravity-switch",this.switchTileset.bind(this))}var t,n,s;return t=e,(n=[{key:"dumpTilemap",value:function(){console.group("Tilemap"),console.info("Map:"),console.table(this.tilemap),console.info("width:",this.width,"height:",this.height),console.groupEnd()}},{key:"isColliding",value:function(e){for(var t=this.getTileCoord(e),n=t.y-4;n<t.y+5;n++)for(var r=t.x-3;r<t.x+5;r++)if(!(r<0||n<0||r>this.width-1||n>this.height-1)){var a=this.spriteList[this.currentTileset][n][r];if(a){if(a.x>e.x+200||a.x<e.x-200)continue;if(a.y>e.y+200||a.y<e.y-200)continue;var o=new PIXI.Rectangle(a.x,a.y,a.width,a.height);if(i.a(e,o))return o}}}},{key:"getTileCoord",value:function(e){var t=e.x,n=e.y;return{x:Math.floor(t/this.tileRenderSize),y:Math.floor(n/this.tileRenderSize)}}},{key:"getPixelsFromTileCoord",value:function(e){var t=e.x,n=e.y;return{x:t*this.tileRenderSize,y:n*this.tileRenderSize}}},{key:"getTile",value:function(e){var t=e.x,n=e.y;if(!(t>this.width-1||t<0||n>this.height-1||n<0))return this.tilemap[n][t]}},{key:"switchTileset",value:function(t){this.container.removeChildren(),this.currentTileset=t?e.TilesetType.EARTH:e.TilesetType.MOON,this.container.addChild(this.containers[this.currentTileset])}},{key:"generateTilemapContent",value:function(){for(var t=0,n=Object.keys(e.TilesetType);t<n.length;t++){var i=n[t];i=e.TilesetType[i];for(var r=0;r<this.height;r++){this.spriteList[i][r]=[];for(var a=0;a<this.width;a++)if(-1!==this.tilemap[r][a]){var o=e.tilesets[i].getSprite(this.tilemap[r][a]);o.x=this.tileRenderSize*a,o.y=this.tileRenderSize*r,o.width=this.tileRenderSize,o.height=this.tileRenderSize,this.containers[i].addChild(o),this.spriteList[i][r].push(o)}else this.spriteList[i][r].push(void 0)}}this.container.addChild(this.containers[this.currentTileset])}}])&&a(t.prototype,n),s&&a(t,s),e}();o(s,"TilesetType",{EARTH:"earth",MOON:"moon"}),o(s,"tilesets",{})},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(0);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_scenes",{}),a(this,"_scenesClasses",{}),a(this,"_activeScene",""),a(this,"_parentContainer",void 0),this._parentContainer=t,i.a.events.addEventHandler("scene:restart",this.restartCurrentScene.bind(this))}var t,n,o;return t=e,(n=[{key:"addScene",value:function(e,t){this._scenes[t]=new e,this._scenesClasses[t]=e}},{key:"restartCurrentScene",value:function(){if(this.activeScene){var e=this.activeScene;this._activeScene=void 0,this._scenes[e].onSceneEnd(),this._parentContainer.removeChild(this._scenes[e].getContainer()),delete this._scenes[e],this._scenes[e]=new this._scenesClasses[e],this._parentContainer.addChild(this._scenes[e].getContainer()),this._scenes[e].onSceneStart(),this._activeScene=e}}},{key:"getScene",value:function(e){if(this._scenes[e])return this._scenes[e];throw new TypeError("Scene ".concat(e," doesnt exists"))}},{key:"activeScene",get:function(){return""===this._activeScene?void 0:this._activeScene},set:function(e){if(!this._scenes[e])throw new TypeError("Scene ".concat(e," doesnt exists"));this._activeScene&&(this._scenes[this._activeScene].onSceneEnd(),this._parentContainer.removeChild(this._scenes[this._activeScene].getContainer())),this._activeScene=e,this._parentContainer.addChild(this._scenes[e].getContainer()),this._scenes[e].onSceneStart()}}])&&r(t.prototype,n),o&&r(t,o),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(6),r=n(7),a=n(9),o=n(10),s=n(11),c=n(12),l=n(13),u=n(14);function h(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p=[i.a,a.a,r.a,o.a,c.a,s.a,l.a,u.a];function y(e,t){var n,i=e,r=h(p);try{for(r.s();!(n=r.n()).done;){var a=n.value;i=i.add(a)}}catch(e){r.e(e)}finally{r.f()}i.load(t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(15),r=n(0),a=n(2),o=n(9);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,e);var t=y(n);function n(){var e;l(this,n),e=t.call(this);new m(e.sceneContainer,[69,70,71],g,200,100,1,1);return e}return h(n,[{key:"update",value:function(e){f(v(n.prototype),"update",this).call(this,e)}}]),n}(i.a);function g(){r.a.sceneManager.activeScene="testScene"}var m=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"start",p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{fontFamily:"Arial",fontSize:15,fill:16715792,align:"left"};l(this,e),s(this,"tileset",new a.a(o.a,{x:32,y:32})),s(this,"isOver",!1),this.sprites=[],this.scale={x:u,y:h},this.onClick=i;for(var y=r,d=0;d<n.length;d++){var v=this.tileset.getSprite(n[d]);this.sprites.push(v),v.position.x=r+v.width/2,v.position.y=c,r+=32,t.addChild(v),this.sprites[d].interactive=!0,this.sprites[d].on("pointerover",this.over.bind(this)),this.sprites[d].on("pointerout",this.out.bind(this)),this.sprites[d].on("click",this.click.bind(this)),this.sprites[d].scale.set(u,h),this.sprites[d].anchor.set(.5,0)}this.text=new PIXI.Text(f,p),this.text.anchor.set(1,1);var b=new PIXI.TextStyle(p),g=PIXI.TextMetrics.measureText(f,b),m={x:y+((r-y)/2*u+g.width/2),y:c+(this.sprites[0].height-g.height/2)};this.text.position=m,t.addChild(this.text)}return h(e,[{key:"over",value:function(e){this.isOver=!0;for(var t=0;t<this.sprites.length;t++)this.text.position.y=this.text.position.y+1,this.sprites[t].scale.set(this.scale.x+.2,this.scale.y+.2);this.text.scale.set(1)}},{key:"out",value:function(e){this.isOver=!0;for(var t=0;t<this.sprites.length;t++)this.text.position.y=this.text.position.y-1,this.sprites[t].scale.set(this.scale.x,this.scale.y);this.text.scale.set(1)}},{key:"click",value:function(e){this.isOver&&this.onClick()}},{key:"update",value:function(e){}}]),e}()},function(e,t,n){"use strict";function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",(function(){return o}));var o=function(){function e(){var t,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i={},(n="_events")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}var t,n,r;return t=e,(n=[{key:"addEventHandler",value:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}},{key:"triggerEvent",value:function(e){if(this._events[e]&&Array.isArray(this._events[e])){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a,o=i(this._events[e]);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.apply(void 0,n)}}catch(e){o.e(e)}finally{o.f()}}}},{key:"removeEventHandler",value:function(e,t){if(this._events[e]&&Array.isArray(this._events[e])){var n=this._events[e].indexOf(t);-1!==n&&this._events[e].splice(n,1)}}}])&&a(t.prototype,n),r&&a(t,r),e}()},function(e){e.exports=JSON.parse('{"endTrigger":{"x":45,"y":6,"width":2,"height":3},"start":{"x":3,"y":10},"laserHitReg":[{"x":19,"y":11,"length":6,"delay":-1,"direction":"left"},{"x":30,"y":6,"length":4,"delay":700,"direction":"bottom"},{"x":22,"y":5,"length":5,"delay":1000,"direction":"right"},{"x":11,"y":4,"length":4,"delay":1200,"direction":"top"}],"ennemies":[{"x":15,"y":4,"speed":1}],"collectables":[{"x":9,"y":2}]}')},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ve}));var i=n(15),r=n(16),a=n(0);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"container",new PIXI.Container),s(this,"_velocity",{x:0,y:0}),s(this,"tilemap",void 0),s(this,"newPosRect",new PIXI.Rectangle(0,0,0,0)),s(this,"isLanded",!0),this.tilemap=t}var t,n,i;return t=e,(n=[{key:"update",value:function(e){a.a.gameplayState.isGravityEnabled&&(this._velocity.y+=.005*a.a.gameplayState.gravityForce*this.tilemap.tileRenderSize*e);var t,n=!1,i=this.getPosition(),r=this.getVelocity(),o=this.container.width,s=this.container.height;i.x,i.x+=r.x*e,this.newPosRect.x=i.x,this.newPosRect.y=i.y,this.newPosRect.width=o,this.newPosRect.height=s,(t=this.tilemap.isColliding(this.newPosRect))&&(t.centerX>this.newPosRect.centerX?i.x=t.x-this.container.width:i.x=t.x+t.width,a.a.gameplayState.isGravityEnabled?r.x=0:r.x=r.x/2*-1),i.y,i.y+=r.y*e,this.newPosRect.x=i.x,this.newPosRect.y=i.y,this.newPosRect.width=o,this.newPosRect.height=s,(t=this.tilemap.isColliding(this.newPosRect))&&(t.centerY>this.newPosRect.centerY?(i.y=t.y-this.container.height,a.a.gameplayState.isGravityEnabled&&r.y>0?r.y=0:r.y=r.y/2*-1,n=!0,0!==r.x&&a.a.gameplayState.isGravityEnabled&&(r.x>.15?r.x-=.6*e:r.x<-.15?r.x+=.6*e:r.x=0)):(i.y=t.y+t.height,a.a.gameplayState.isGravityEnabled&&r.y<0?r.y=0:r.y=r.y/2*-1)),this.setPosition(i),this.setVelocity(r),n&&this.onLanded(),this.isLanded=n}},{key:"jump",value:function(){this.getVelocity().y=-.21*this.tilemap.tileRenderSize}},{key:"setPosition",value:function(e){var t=e.x,n=e.y;this.container.x=t,this.container.y=n}},{key:"getPosition",value:function(){return{x:this.container.x,y:this.container.y}}},{key:"setVelocity",value:function(e){var t=e.x,n=e.y;this._velocity.x=t,this._velocity.y=n}},{key:"getVelocity",value:function(){return this._velocity}},{key:"onLanded",value:function(){}}])&&o(t.prototype,n),i&&o(t,i),e}(),l=n(10);function u(e){var t={};t.value=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.key===t.value&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1,e.preventDefault())},t.upHandler=function(e){e.key===t.value&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0,e.preventDefault())};var n=t.downHandler.bind(t),i=t.upHandler.bind(t);return window.addEventListener("keydown",n,!1),window.addEventListener("keyup",i,!1),t.unsubscribe=function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",i)},t}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_animTexture",void 0),f(this,"_frameSize",void 0),f(this,"sprite",void 0),f(this,"_animData",void 0),f(this,"_currentAnim",void 0),f(this,"_currentAnimFrame",0),f(this,"_frameRect",new PIXI.Rectangle),f(this,"_intervalId",-1),f(this,"_delay",void 0),this._animTexture=a.a.app.loader.resources[t].texture,this._frameSize=n,this._currentAnim=r,this._animData=i,this._delay=o,window.anim=this,this._frameRect.width=n.x,this._frameRect.height=n.y,this._frameRect.y=0,this._setCurrentAnimFrame(),this._animTexture.frame=this._frameRect,this.sprite=new PIXI.Sprite(this._animTexture)}var t,n,i;return t=e,(n=[{key:"start",value:function(){this._intervalId=setInterval(this._setCurrentAnimFrame.bind(this),this._delay)}},{key:"_setCurrentAnimFrame",value:function(){var e=this._animData[this._currentAnim];e&&(e.animated?(this._currentAnimFrame||(this._currentAnimFrame=e.from-1),this._currentAnimFrame>=e.to?e.loop&&(this._currentAnimFrame=e.from,this._frameRect.x=e.from*this._frameRect.width):(this._currentAnimFrame++,this._frameRect.x=this._currentAnimFrame*this._frameRect.width)):(this._currentAnimFrame=e.tileId,this._frameRect.x=e.tileId*this._frameRect.width),this._animTexture.frame=this._frameRect)}},{key:"unload",value:function(){-1!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=-1)}},{key:"setCurrentAnimation",value:function(e){e!==this._currentAnim&&(this._currentAnim=e,this._setCurrentAnimFrame())}}])&&h(t.prototype,n),i&&h(t,i),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=x(e);if(t){var r=x(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,n,i,r=g(o);function o(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),S(w(i=r.call(this,e)),"playerSize",2),S(w(i),"playerAnimation",void 0),S(w(i),"playerSprite",void 0),S(w(i),"keysHandlers",{top:null,left:null,leftQwerty:null,right:null,bottom:null}),S(w(i),"isSneaked",!1),S(w(i),"remainingJumps",2),S(w(i),"maxSpeed",8),S(w(i),"resizeRatio",0),i.playerAnimation=new p(l.a,{x:32,y:56},{idle:{animated:!1,tileId:0},run:{animated:!0,from:1,to:7,loop:!0},jump:{animated:!0,from:10,to:13,loop:!1}},"idle",100),i.playerSprite=i.playerAnimation.sprite,i.resizeRatio=e.tileRenderSize*i.playerSize/i.playerSprite.height,i.playerSprite.scale.set(i.resizeRatio),i.playerSprite.anchor.set(.5),i.playerSprite.x=i.playerSprite.width/2,i.playerSprite.y=i.playerSprite.height/2,i.container.x=t*i.tilemap.tileRenderSize,i.container.y=n*i.tilemap.tileRenderSize,i.container.addChild(i.playerSprite),i}return t=o,(n=[{key:"startKeyboardListening",value:function(){this.keysHandlers.top=u(" "),this.keysHandlers.bottom=u("ctrl"),this.keysHandlers.left=u("q"),this.keysHandlers.leftQwerty=u("a"),this.keysHandlers.right=u("d"),this.keysHandlers.top.press=this.jump.bind(this),this.keysHandlers.bottom.press=this.startSneack.bind(this),this.keysHandlers.bottom.release=this.stopSneack.bind(this),this.playerAnimation.start()}},{key:"stopKeyboardListening",value:function(){this.keysHandlers.top.unsubscribe(),this.keysHandlers.bottom.unsubscribe(),this.keysHandlers.leftQwerty.unsubscribe(),this.keysHandlers.left.unsubscribe(),this.keysHandlers.right.unsubscribe(),this.playerAnimation.unload()}},{key:"jump",value:function(){if(a.a.gameplayState.isGravityEnabled){if(this.remainingJumps<=0)return;this.remainingJumps--,v(x(o.prototype),"jump",this).call(this)}}},{key:"startSneack",value:function(){this.isSneaked=!0}},{key:"stopSneack",value:function(){this.isSneaked=!1}},{key:"update",value:function(e){if(this.isLanded?this.keysHandlers.right.isDown||this.keysHandlers.left.isDown||this.keysHandlers.leftQwerty.isDown?this.playerAnimation.setCurrentAnimation("run"):this.playerAnimation.setCurrentAnimation("idle"):a.a.gameplayState.isGravityEnabled&&this.playerAnimation.setCurrentAnimation("jump"),v(x(o.prototype),"update",this).call(this,e),a.a.gameplayState.isGravityEnabled){if(this.keysHandlers.right.isDown){this.playerSprite.scale.x=this.resizeRatio;var t=this.getVelocity();t.x<this.maxSpeed*this.tilemap.tileRenderSize*.03&&(t.x+=.7*e*this.tilemap.tileRenderSize*.04)}if(this.keysHandlers.left.isDown||this.keysHandlers.leftQwerty.isDown){this.playerSprite.scale.x=-1*this.resizeRatio;var n=this.getVelocity();n.x>-1*this.maxSpeed*this.tilemap.tileRenderSize*.03&&(n.x-=.7*e*this.tilemap.tileRenderSize*.04)}this.isSneaked&&(this.getVelocity().y+=.2*e*this.tilemap.tileRenderSize*.04)}}},{key:"onLanded",value:function(){v(x(o.prototype),"onLanded",this).call(this),this.remainingJumps=2}}])&&d(t.prototype,n),i&&d(t,i),o}(c),k=n(11),P=n(3);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function R(e,t,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(o,e);var t,n,i,r=j(o);function o(e,t,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),z(E(i=r.call(this,e)),"sprite",void 0),z(E(i),"reverse",!1),z(E(i),"speed",5),z(E(i),"_canHitPlayer",!0),i.sprite=new PIXI.Sprite(a.a.app.loader.resources[k.a].texture);var s=2*e.tileRenderSize/i.sprite.height;return i.sprite.scale.set(s),i.container.y=n*e.tileRenderSize,i.container.x=t*e.tileRenderSize,i.container.addChild(i.sprite),i.setVelocity({x:8,y:i.getVelocity().y}),i}return t=o,(n=[{key:"isTouching",value:function(e){var t=e.getPosition(),n=this.getPosition(),i=new PIXI.Rectangle(t.x,t.y,e.playerSprite.width,e.playerSprite.height),r=new PIXI.Rectangle(n.x,n.y,this.sprite.width,this.sprite.height);return!!P.a(i,r)}},{key:"move",value:function(){var e=this.getPosition(),t=this.reverse?e.x+this.sprite.width:e.x,n=e.y+this.sprite.height,i=this.tilemap.getTileCoord({x:t,y:n-1});-1!==this.tilemap.getTile({x:i.x,y:i.y+1})&&((-1===this.tilemap.getTile({x:i.x+(this.reverse?-1:1),y:i.y+1})||-1!==this.tilemap.getTile({x:i.x+(this.reverse?-1:1),y:i.y})||-1!==this.tilemap.getTile({x:i.x+(this.reverse?-1:1),y:i.y-1}))&&(this.reverse=!this.reverse),this.setVelocity({x:this.speed*(this.reverse?-1:1)*this.tilemap.tileRenderSize*.03,y:this.getVelocity().y}))}},{key:"update",value:function(e,t){R(A(o.prototype),"update",this).call(this,e),this.isTouching(t)&&this._canHitPlayer&&(a.a.events.triggerEvent("gameplay:death"),this._canHitPlayer=!1),this.move()}}])&&C(t.prototype,n),i&&C(t,i),o}(c);function X(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),M(this,"container",new PIXI.Container),M(this,"sceneContainer",void 0),M(this,"sceneContainerWidth",void 0),M(this,"followedContainer",void 0),M(this,"screenSize",{x:a.a.app.renderer.width,y:a.a.app.renderer.height}),this.container.addChild(n),this.sceneContainer=n,this.sceneContainerWidth=this.sceneContainer.width,this.followedContainer=t}var t,n,i;return t=e,(n=[{key:"update",value:function(){var e=this.followedContainer.x,t=Math.round(-1*e+this.screenSize.x/2);t>0&&(t=e<0?-1*e:0),t<-1*this.sceneContainerWidth+this.screenSize.x&&(t=-1*this.sceneContainerWidth+this.screenSize.x),this.sceneContainer.x=t}}])&&X(t.prototype,n),i&&X(t,i),e}();function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F(this,"bounds",void 0),F(this,"targetCollider",void 0),F(this,"onCollide",void 0),F(this,"_lastIsTouches",!1),this.bounds=t,this.targetCollider=n}var t,n,i;return t=e,(n=[{key:"update",value:function(){"function"==typeof this.onCollide&&(this.isTouches?this._lastIsTouches||(this.onCollide(),this._lastIsTouches=!0):this._lastIsTouches=!1)}},{key:"isTouches",get:function(){return P.a(this.bounds,this.targetCollider)}}])&&L(t.prototype,n),i&&L(t,i),e}(),V=n(13),W=n(14);function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=function(){function e(t,n,i){var r=i.x,o=i.y,s=i.length,c=i.delay,l=i.direction;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,"container",new PIXI.Container),U(this,"sprite",[]),U(this,"_canHitPlayer",!0),U(this,"_active",!0),U(this,"_intervalId",void 0),U(this,"_laserlength",void 0),U(this,"delay",void 0),"top"===l&&o++,"left"===l&&r++,r*=n.tileRenderSize,o*=n.tileRenderSize;var u=n.tileRenderSize,h=n.tileRenderSize/32,f=new PIXI.Sprite(a.a.app.loader.resources[W.a].texture);switch(f.width=u,f.height=7*h,f.x=r,f.y=o,f.anchor.set(.5,1),l){case"left":o+=2*h;case"right":o+=u/2-h,f.y+=u/2;break;case"top":case"bottom":r+=u/2-h,f.x+=u/2}switch(l){case"left":f.angle=-90;break;case"right":f.angle=90;break;case"bottom":f.angle=180}for(var p=0;p<=s-1;p++)this.sprite.push(new PIXI.Sprite(a.a.app.loader.resources[V.a].texture)),this.sprite[p].width=2*h,this.sprite[p].height=n.tileRenderSize,"top"===l?(this.sprite[p].y=o-this.sprite[p].height*(p+1),this.sprite[p].x=r):"bottom"===l?(this.sprite[p].y=o+this.sprite[p].height*p,this.sprite[p].x=r):"left"===l?(this.sprite[p].angle=-90,this.sprite[p].y=o,this.sprite[p].x=r-this.sprite[p].height*(p+1)):(this.sprite[p].angle=90,this.sprite[p].y=o,this.sprite[p].x=r+this.sprite[p].height*(p+1)),this._laserlength=this.sprite[p].height,this.container.addChild(this.sprite[p]);this.laserHitReg=new G("top"===l||"bottom"===l?new PIXI.Rectangle(this.sprite[0].x,this.sprite["bottom"===l?0:this.sprite.length-1].y,this.sprite[0].width,this.sprite[0].height*this.sprite.length):new PIXI.Rectangle(this.sprite["right"===l?0:this.sprite.length-1].x-("right"===l?this.sprite[0].height:0),this.sprite[0].y+("right"===l?0:-1)*this.sprite[0].width,this.sprite[0].height*this.sprite.length,this.sprite[0].width),t.container),this.container.addChild(f),this.delay=c,this._intervalId=this.startInterval(),this.laserHitReg.onCollide=this.onHit.bind(this)}var t,n,i;return t=e,(n=[{key:"onHit",value:function(){this._canHitPlayer&&(this._canHitPlayer=!1,a.a.events.triggerEvent("gameplay:death"))}},{key:"startInterval",value:function(){var e=this;return setInterval((function(){-1!==e.delay&&(e._active=!e._active);for(var t=e._active?1:0,n=0;n<e.sprite.length;n++)e.sprite[n].alpha=t}),this.delay)}},{key:"onSceneEnd",value:function(){clearInterval(this._intervalId)}},{key:"update",value:function(){this._active&&this.laserHitReg.update()}}])&&N(t.prototype,n),i&&N(t,i),e}(),J=n(12);function Q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),K(this,"container",new PIXI.Container),K(this,"count",{total:0,pick:0}),K(this,"sprite",void 0),K(this,"_pick",!1),this.sprite=new PIXI.Sprite(a.a.app.loader.resources[J.a].texture),this.sprite.width=r,this.sprite.height=r,this.container.x=n*r,this.container.y=i*r,this.container.addChild(this.sprite),this.takeCoin=new G(new PIXI.Rectangle(this.container.x,this.container.y,this.sprite.width,this.sprite.height),t.container),this.takeCoin.onCollide=this.pickup.bind(this)}var t,n,i;return t=e,(n=[{key:"pickup",value:function(){this._pick=!0,this.takeCoin.onCollide=void 0,this.container.removeChild(this.sprite),console.log("pickup")}},{key:"isPick",value:function(){return this._pick}},{key:"update",value:function(){this.takeCoin.update()}}])&&Q(t.prototype,n),i&&Q(t,i),e}();function q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),B(this,"container",new PIXI.Container),B(this,"screenSize",{x:a.a.app.renderer.width,y:a.a.app.renderer.height})}var t,n,i;return t=e,(n=[{key:"update",value:function(e){}}])&&q(t.prototype,n),i&&q(t,i),e}();function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=oe(e);if(t){var r=oe(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return re(this,n)}}function re(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(o,e);var t,n,i,r=ie(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),se(ae(e=r.call(this)),"background",new PIXI.Graphics),se(ae(e),"gravityText",new PIXI.Text("Gravity:",{fontFamily:"Londrina Solid",fill:"#fff"})),se(ae(e),"gravityValueText",new PIXI.Text("ON",{fontFamily:"Londrina Solid",fill:"#0f0",fontSize:40})),e.background.beginFill(4096961),e.background.drawPolygon([new PIXI.Point(20,20),new PIXI.Point(200,0),new PIXI.Point(210,120),new PIXI.Point(24,110)]),e.background.endFill(),e.container.x=e.screenSize.x-250,e.container.y=e.screenSize.y-150,e.gravityText.x=50,e.gravityText.y=25,e.gravityValueText.x=90,e.gravityValueText.y=60,e.container.addChild(e.background),e.container.addChild(e.gravityValueText),e.container.addChild(e.gravityText),a.a.events.addEventHandler("gameplay:gravity-switch",e.onGravitySwitches.bind(ae(e))),e}return t=o,(n=[{key:"onGravitySwitches",value:function(e){e?(this.gravityValueText.text="ON",this.gravityValueText.style.fill="#0f0"):(this.gravityValueText.text="OFF",this.gravityValueText.style.fill="#f00")}}])&&te(t.prototype,n),i&&te(t,i),o}(Z);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function he(e,t,n){return(he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ve(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ve(e);if(t){var r=ve(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ye(this,n)}}function ye(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(o,e);var t,n,i,r=pe(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),be(de(e=r.call(this)),"background",new PIXI.Graphics),be(de(e),"availableTexts",["You're dead buddy !","Wasted","Yet another restart !","This time, he said.","Not this time !","Why are you running ?","Waconda forever","Are ya winnin' son ?"]),be(de(e),"textStyle",new PIXI.TextStyle({fontFamily:"Londrina Solid",fontSize:90,fill:"0xfff"})),be(de(e),"text",new PIXI.Text(e.availableTexts[0],e.textStyle)),be(de(e),"textDims",void 0),be(de(e),"isAnimating",!1),e.background.beginFill(4096961),e.background.drawPolygon([new PIXI.Point(0,0),new PIXI.Point(900,100),new PIXI.Point(950,550),new PIXI.Point(20,600)]),e.background.endFill(),e.background.x=-1*e.background.width,e.textDims=PIXI.TextMetrics.measureText(e.text.text,e.textStyle),e.text.x=-1*e.textDims.width,e.container.y=e.screenSize.y/2-e.background.height/2,e.container.addChild(e.background),e.container.addChild(e.text),a.a.events.addEventHandler("gameplay:death",e.startAnim.bind(de(e))),e}return t=o,(n=[{key:"startAnim",value:function(){var e=Math.floor(Math.random()*this.availableTexts.length);this.text.text=this.availableTexts[e],this.textDims=PIXI.TextMetrics.measureText(this.text.text,this.textStyle),this.text.x=-1*this.textDims.width,this.text.y=this.background.height/2-this.textDims.height/2,this.background.x=this.screenSize.x,this.isAnimating=!0,a.a.gameplayState.paused=!0}},{key:"update",value:function(e){he(ve(o.prototype),"update",this).call(this,e),this.isAnimating&&(this.text.x<this.screenSize.x&&(this.text.x<this.background.x||this.text.x+this.textDims.width>this.background.x+this.background.width?this.text.x+=40*e:this.text.x+=2*e),this.background.x+this.background.width>0&&(this.text.x<this.background.x||this.text.x+this.textDims.width>this.background.x+this.background.width?this.background.x-=50*e:this.background.x-=2*e),this.text.x<this.screenSize.x||this.background.x+this.background.width>0||(this.isAnimating=!1,a.a.gameplayState.paused=!1,a.a.events.triggerEvent("scene:restart")))}}])&&ue(t.prototype,n),i&&ue(t,i),o}(Z);function me(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function xe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Se(this,"container",new PIXI.Container),Se(this,"uis",[new ce,new ge]);var t,n=me(this.uis);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.container.addChild(i.container)}}catch(e){n.e(e)}finally{n.f()}}var t,n,i;return t=e,(n=[{key:"update",value:function(e){var t,n=me(this.uis);try{for(n.s();!(t=n.n()).done;)t.value.update(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"assignToContainer",value:function(e){e.addChild(this.container)}}])&&xe(t.prototype,n),i&&xe(t,i),e}();function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Re(e,t,n){return(Re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ae(e);if(t){var r=Ae(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ie(this,n)}}function Ie(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?Ee(e):t}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(s,e);var t,n,i,o=je(s);function s(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),ze(Ee(t=o.call(this)),"player",void 0),ze(Ee(t),"tilemap",void 0),ze(Ee(t),"keysHandlers",{gravitySwitch:null}),ze(Ee(t),"cameraHandledContainer",new PIXI.Container),ze(Ee(t),"camera",void 0),ze(Ee(t),"userInterface",void 0),ze(Ee(t),"endTrigger",void 0),ze(Ee(t),"lasers",[]),ze(Ee(t),"mobs",[]),ze(Ee(t),"collectables",[]),t.tilemap=new r.a(e,a.a.app.screen.height),t.player=new _(t.tilemap,e.dynamicObjectsMap.start.x,e.dynamicObjectsMap.start.y),window.player=t.player,window.tilemap=t.tilemap,e.dynamicObjectsMap&&e.dynamicObjectsMap.endTrigger){var n=t.tilemap.getPixelsFromTileCoord(e.dynamicObjectsMap.endTrigger);t.endTrigger=new G(new PIXI.Rectangle(n.x,n.y,e.dynamicObjectsMap.endTrigger.width*t.tilemap.tileRenderSize,e.dynamicObjectsMap.endTrigger.height*t.tilemap.tileRenderSize),t.player.container),t.endTrigger.onCollide=t.onPlayerReachEnd.bind(Ee(t))}window.endTrigger=t.endTrigger;var i,c=Pe(e.dynamicObjectsMap.laserHitReg);try{for(c.s();!(i=c.n()).done;){var l=i.value,u=new Y(t.player,t.tilemap,l);t.lasers.push(u),t.cameraHandledContainer.addChild(u.container)}}catch(e){c.e(e)}finally{c.f()}var h,f=Pe(e.dynamicObjectsMap.ennemies);try{for(f.s();!(h=f.n()).done;){var p=h.value,y=new H(t.tilemap,p.x,p.y);t.mobs.push(y),t.cameraHandledContainer.addChild(y.container)}}catch(e){f.e(e)}finally{f.f()}var d,v=Pe(e.dynamicObjectsMap.collectables);try{for(v.s();!(d=v.n()).done;){var b=d.value,g=new $(t.player,b.x,b.y,t.tilemap.tileRenderSize);t.collectables.push(g),t.cameraHandledContainer.addChild(g.container)}}catch(e){v.e(e)}finally{v.f()}return t.userInterface=new _e,t.cameraHandledContainer.addChild(t.tilemap.container),t.cameraHandledContainer.addChild(t.player.container),t.camera=new D(t.player.container,t.cameraHandledContainer),t.userInterface.assignToContainer(t.camera.container),t.sceneContainer.addChild(t.camera.container),t}return t=s,(n=[{key:"update",value:function(e){Re(Ae(s.prototype),"update",this).call(this,e),this.userInterface.update(e),a.a.gameplayState.paused||(this.player.update(e),this.camera.update(),this.updateLasers(),this.updateMobs(e),this.updateCollectable(),this.userInterface.update(e),this.endTrigger.update())}},{key:"updateLasers",value:function(){var e,t=Pe(this.lasers);try{for(t.s();!(e=t.n()).done;)e.value.update()}catch(e){t.e(e)}finally{t.f()}}},{key:"updateMobs",value:function(e){var t,n=Pe(this.mobs);try{for(n.s();!(t=n.n()).done;)t.value.update(e,this.player)}catch(e){n.e(e)}finally{n.f()}}},{key:"updateCollectable",value:function(){var e,t=Pe(this.collectables);try{for(t.s();!(e=t.n()).done;)e.value.update()}catch(e){t.e(e)}finally{t.f()}}},{key:"onSceneStart",value:function(){a.a.gameplayState.isGravityEnabled=!0,Re(Ae(s.prototype),"onSceneStart",this).call(this),this.player.startKeyboardListening(),this.keysHandlers.gravitySwitch=u("e"),this.keysHandlers.gravitySwitch.press=this.switchGravity.bind(this)}},{key:"onSceneEnd",value:function(){Re(Ae(s.prototype),"onSceneEnd",this).call(this),this.player.stopKeyboardListening(),this.keysHandlers.gravitySwitch.unsubscribe(),this.lasers.forEach((function(e){return e.onSceneEnd()}))}},{key:"switchGravity",value:function(){console.log("Gravity switch"),a.a.gameplayState.isGravityEnabled=!a.a.gameplayState.isGravityEnabled,a.a.events.triggerEvent("gameplay:gravity-switch",a.a.gameplayState.isGravityEnabled)}},{key:"onPlayerReachEnd",value:function(){console.info("Player reached end"),a.a.events.triggerEvent("scene:restart")}}])&&Ce(t.prototype,n),i&&Ce(t,i),s}(i.a),Xe={level1:{tileMap:"8,8,8,8,8,8,8,8,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8\n8,8,8,8,8,8,8,8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,14,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8\n8,8,8,8,8,8,8,8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8\n8,8,8,8,8,8,8,8,18,1,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,-1,-1,-1,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8\n8,8,8,8,8,8,8,8,8,8,9,-1,0,2,-1,-1,-1,-1,-1,-1,7,4,16,-1,-1,-1,14,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8\n8,8,8,8,8,4,5,5,6,8,18,19,20,18,19,19,19,19,19,19,20,9,-1,-1,-1,-1,-1,7,8,4,15,6,8,8,8,8,8,4,5,5,5,5,5,5,5,5,5,6\n8,4,5,5,5,16,-1,-1,14,5,5,5,6,8,8,8,8,8,8,8,8,18,2,-1,-1,-1,0,20,4,16,-1,14,5,5,5,5,5,16,-1,-1,-1,-1,-1,-1,-1,-1,-1,7\n8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,14,5,5,5,5,5,5,5,5,15,16,-1,-1,-1,14,15,16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7\n8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,13\n8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,1,1,1,1,1,1,1,1,1,1,20\n8,9,-1,-1,-1,-1,0,19,19,19,19,19,19,2,-1,-1,-1,-1,-1,-1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,20,8,8,8,8,8,8,8,8,8,8,8,8\n8,18,1,1,1,1,20,8,8,8,8,8,8,9,-1,-1,-1,-1,-1,-1,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8\n8,8,8,8,8,8,8,8,8,8,8,8,8,18,19,19,19,19,19,19,20,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8\n",dynamicObjectsMap:n(26)}};function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ge(e);if(t){var r=Ge(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Fe(this,n)}}function Fe(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(n,e);var t=Le(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,Xe.level1)}return n}(He)},function(e,t,n){"use strict";n.r(t);var i=n(0);n(38);WebFont.load({google:{families:["Londrina Solid"]},active:function(){new i.a}})},,,,,,,,,,function(e,t,n){}]);
//# sourceMappingURL=main-e4d53e5ac3c85814231d8f676a0eefa96a82debc680ac5b85ca8faba3b4a.js.map